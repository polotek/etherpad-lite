global
  daemon
  pidfile /var/run/haproxy/paddie.pid
  stats socket /var/run/haproxy/paddie.sock user root group root mode 600 level admin
  log /dev/log local1
  user haproxy
  group haproxy

defaults
  log global
  option dontlognull

listen stats
  bind *:8081
  mode http
  stats enable
  stats scope paddie-vip
  stats scope paddies
  stats uri /
  stats refresh 1s

  timeout client  60s
  timeout connect 60s
  timeout server  60s

frontend paddie-vip
  mode http
  option httplog
  bind *:8080
  maxconn 4096
  default_backend paddies

  timeout client 600s

backend paddies
  mode http
  balance hdr(Host)
  retries 1
  option redispatch

  timeout connect 300s
  timeout check   600s
  timeout queue   600s
  timeout server  600s

  option httpchk GET /healthcheck

  server node-9001 localhost:9001 check inter 10s maxconn 300
  server node-9002 localhost:9002 check inter 10s maxconn 300
  server node-9002 localhost:9003 check inter 10s maxconn 300
