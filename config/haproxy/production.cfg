global
  daemon
  pidfile /var/run/haproxy/paddie.pid
  stats socket /var/run/haproxy/paddie.sock user root group root mode 600 level admin
  log /dev/log local1
  user haproxy
  group haproxy

defaults
  log global
  option dontlognull

listen stats
  bind *:8081
  mode http
  stats enable
  stats scope paddie-vip
  stats scope paddies
  stats uri /
  stats refresh 1s

  timeout client  90s
  timeout connect 90s
  timeout server  90s

frontend paddie-vip
  mode http
  option httplog
  bind *:8080
  maxconn 4096
  default_backend paddies

  timeout client 600s

backend paddies
  mode http
  balance hdr(X-Doc-Partition)
  retries 1
  option redispatch

  timeout connect 10s
  timeout check   10s
  timeout queue   90s
  timeout server  90s

  option httpchk GET /int/healthcheck

  server node-9001 localhost:9001 check inter 10s maxconn 300
  server node-9002 localhost:9002 check inter 10s maxconn 300
  server node-9003 localhost:9003 check inter 10s maxconn 300
  server node-9004 localhost:9004 check inter 10s maxconn 300
  server node-9005 localhost:9005 check inter 10s maxconn 300
  server node-9006 localhost:9006 check inter 10s maxconn 300
  server node-9007 localhost:9007 check inter 10s maxconn 300
  server node-9008 localhost:9008 check inter 10s maxconn 300
  server node-9009 localhost:9009 check inter 10s maxconn 300
  server node-9010 localhost:9010 check inter 10s maxconn 300
  server node-9011 localhost:9011 check inter 10s maxconn 300
  server node-9012 localhost:9012 check inter 10s maxconn 300
